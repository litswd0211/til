## ğŸ“’ LDAPæ§‹é€ ã¨ä½¿ã„æ–¹ãƒ¡ãƒ¢

### âœ… LDAPã®åŸºæœ¬æ§‹é€ 

ãƒ‡ãƒ¼ã‚¿ã¯ãƒ„ãƒªãƒ¼æ§‹é€ ã§ç®¡ç†ã•ã‚Œã€éšå±¤çš„ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ã‚°ãƒ«ãƒ¼ãƒ—ã‚’æ•´ç†ã§ãã¾ã™ã€‚

#### **ä¸»ãªç”¨èª**

* **dn**ï¼ˆDistinguished Nameï¼‰ï¼šãƒ•ãƒ«ãƒ‘ã‚¹
* **cn**ï¼ˆCommon Nameï¼‰ï¼šåå‰
* **uid**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ID
* **objectClass**ï¼šã‚¨ãƒ³ãƒˆãƒªã®ç¨®é¡ï¼ˆ`inetOrgPerson` ãªã©ï¼‰

#### **æ§‹é€ ä¾‹**

```
dc=example,dc=com
â”œâ”€â”€ ou=Users
â”‚   â””â”€â”€ cn=Taro Tanaka
â””â”€â”€ ou=Groups
    â””â”€â”€ cn=Developers
```

#### **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ãƒˆãƒªã®ä¾‹**

```ldif
dn: cn=Taro Tanaka,ou=Users,dc=example,dc=com
objectClass: inetOrgPerson
cn: Taro Tanaka
uid: tanaka
mail: taro@example.com
```

---

### ğŸ³ Dockerã§OpenLDAPã‚µãƒ¼ãƒã‚’ç«‹ã¦ã‚‹

#### **docker-compose.yml**

```yaml
version: '3'
services:
  openldap:
    image: osixia/openldap:1.5.0
    ports:
      - "389:389"
    environment:
      LDAP_ORGANISATION: "Example Corp"
      LDAP_DOMAIN: "example.com"
      LDAP_ADMIN_PASSWORD: "adminpassword"
    volumes:
      - ./ldap_data:/var/lib/ldap
      - ./ldap_config:/etc/ldap/slapd.d
```

#### **èµ·å‹•ã¨ç¢ºèª**

```bash
# èµ·å‹•
docker-compose up -d

# ç¢ºèª
docker exec -it openldap ldapsearch -x -b dc=example,dc=com
```

---

### ğŸ“ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ï¼ˆLDIFï¼‰

#### **users.ldif**

```ldif
dn: ou=Users,dc=example,dc=com
objectClass: organizationalUnit
ou: Users

dn: cn=Taro Tanaka,ou=Users,dc=example,dc=com
objectClass: inetOrgPerson
cn: Taro Tanaka
sn: Tanaka
uid: tanaka
mail: taro@example.com
userPassword: password123
```

#### **ç™»éŒ²ã‚³ãƒãƒ³ãƒ‰**

```bash
# ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ†ãƒŠã«ã‚³ãƒ”ãƒ¼
docker cp users.ldif openldap:/tmp/

# ãƒ‡ãƒ¼ã‚¿ã‚’ç™»éŒ²
docker exec -it openldap ldapadd -x -D "cn=admin,dc=example,dc=com" -w adminpassword -f /tmp/users.ldif
```

---

### ğŸŸ¢ Node.jsã§LDAPé€£æºï¼ˆldapjsï¼‰

#### **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

```bash
npm install ldapjs
```

#### **èªè¨¼ä¾‹**

```js
const ldap = require('ldapjs');

const client = ldap.createClient({ 
  url: 'ldap://localhost:389' 
});

client.bind('cn=Taro Tanaka,ou=Users,dc=example,dc=com', 'password123', (err) => {
  if (err) {
    console.error('èªè¨¼å¤±æ•—:', err);
  } else {
    console.log('èªè¨¼æˆåŠŸ');
  }
  client.unbind();
});
```

---

### ğŸ”µ Golangã§LDAPé€£æºï¼ˆgo-ldapï¼‰

#### **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

```bash
go get github.com/go-ldap/ldap/v3
```

#### **èªè¨¼ä¾‹**

```go
package main

import (
    "fmt"
    "github.com/go-ldap/ldap/v3"
)

func main() {
    conn, err := ldap.Dial("tcp", "localhost:389")
    if err != nil {
        panic(err)
    }
    defer conn.Close()
    
    err = conn.Bind("cn=Taro Tanaka,ou=Users,dc=example,dc=com", "password123")
    if err != nil {
        fmt.Println("èªè¨¼å¤±æ•—:", err)
    } else {
        fmt.Println("èªè¨¼æˆåŠŸ")
    }
}
```

#### **æ¤œç´¢ä¾‹**

```go
// ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢
req := ldap.NewSearchRequest(
    "ou=Users,dc=example,dc=com",
    ldap.ScopeWholeSubtree, 
    ldap.NeverDerefAliases, 
    0, 0, false,
    "(uid=tanaka)",
    []string{"dn", "cn", "mail"},
    nil,
)

res, err := conn.Search(req)
if err != nil {
    panic(err)
}

for _, entry := range res.Entries {
    fmt.Printf("ãƒ¡ãƒ¼ãƒ«: %s\n", entry.GetAttributeValue("mail"))
    fmt.Printf("åå‰: %s\n", entry.GetAttributeValue("cn"))
}
```

---

### ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

* [OpenLDAP Documentation](https://www.openldap.org/doc/)
* [ldapjs - Node.js LDAP Client](https://ldapjs.org/)
* [go-ldap - Go LDAP Client](https://github.com/go-ldap/ldap)

---

## ğŸ§  ã¾ã¨ã‚

| é …ç›®           | å†…å®¹     |
| ------------ | ------------ |
| æ§‹é€  | ãƒ„ãƒªãƒ¼å½¢å¼ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ç®¡ç† |
| èªè¨¼ | DNï¼ˆDistinguished Nameï¼‰ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§èªè¨¼ |
| æ¤œç´¢ | ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¡ä»¶ã§ã‚¨ãƒ³ãƒˆãƒªã‚’æ¤œç´¢å¯èƒ½ |
| é‹ç”¨ | Dockerã§ç°¡å˜ã«æ¤œè¨¼ç’°å¢ƒã‚’æ§‹ç¯‰ |

---
